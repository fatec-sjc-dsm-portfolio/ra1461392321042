<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Portf√≥lio</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="assets/home.css">
    <link rel="stylesheet" href="assets/sobre.css">
    <link rel="stylesheet" href="assets/contato.css">
    <link rel="stylesheet" href="assets/projetos.css">
</head>

<body>
    <header>
        <div class="header-logo">
            <a href="#home" class="logo-link">
                <img src="assets/images/foto_pessoal.webp" alt="Maria Gabriela" class="logo-avatar">
                <span class="logo-text"></span>
            </a>
        </div>
        <nav aria-label="Menu principal">
            <ul id="menu-list">
            </ul>
        </nav>
    </header>

    <main id="conteudo">
    </main>

    <script>
        function renderMenu(current) {
            const menuList = document.getElementById('menu-list');
            let items = '';
            items += '<li><a href="#sobre">Sobre</a></li>';
            items += '<li><a href="#projetos">Projetos</a></li>';
            items += '<li><a href="#contato">Contato</a></li>';
            menuList.innerHTML = items;
        }

        function loadSection(sec) {            
            const contatoCss = document.getElementById('contato-css');
            if (contatoCss) contatoCss.remove();
            const projetosCss = document.getElementById('projetos-css');
            if (projetosCss) projetosCss.remove();
            const sobreCss = document.getElementById('sobre-css');
            if (sobreCss) sobreCss.remove();
            renderMenu(sec);
            if (!sec || sec === 'home') {
                fetch('pages/home.html')
                    .then(resp => resp.text())
                    .then(html => {
                        document.getElementById('conteudo').innerHTML = html;
                        highlightMenu('home');
                    });
            } else {
                fetch('pages/' + sec + '.html')
                    .then(resp => resp.text())
                    .then(html => {
                        document.getElementById('conteudo').innerHTML = html;
                        if (sec === 'sobre') {
                            const link = document.createElement('link');
                            link.rel = 'stylesheet';
                            link.href = 'assets/sobre.css';
                            link.id = 'sobre-css';
                            document.head.appendChild(link);
                        }
                        if (sec === 'contato') {
                            const link = document.createElement('link');
                            link.rel = 'stylesheet';
                            link.href = 'assets/contato.css';
                            link.id = 'contato-css';
                            document.head.appendChild(link);
                        }
                        if (sec === 'projetos') {
                            const link = document.createElement('link');
                            link.rel = 'stylesheet';
                            link.href = 'assets/projetos.css';
                            link.id = 'projetos-css';
                            document.head.appendChild(link);
                            setTimeout(initializeModals, 100);
                        }
                        highlightMenu(sec);
                    });
            }
        }

        function initializeModals() {            
            const projectCards = document.querySelectorAll('.project-card[data-modal]');
            const modals = document.querySelectorAll('.modal');
            const closeButtons = document.querySelectorAll('.close');

            // Abre modal ao clicar em um card do meu projeto
            projectCards.forEach(card => {
                card.addEventListener('click', function() {
                    const modalId = this.getAttribute('data-modal');
                    const modal = document.getElementById(modalId);
                    if (modal) {
                        modal.style.display = 'block';
                        document.body.style.overflow = 'hidden';
                    }
                });
            });

            // Fechar o modal
            closeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    this.closest('.modal').style.display = 'none';
                    document.body.style.overflow = 'auto';
                });
            });

            // Ou fechar modal clicando fora dele
            modals.forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.style.display = 'none';
                        document.body.style.overflow = 'auto';
                    }
                });
            });

            // Fechar modal com a tecla ESC
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    modals.forEach(modal => {
                        if (modal.style.display === 'block') {
                            modal.style.display = 'none';
                            document.body.style.overflow = 'auto';
                        }
                    });
                }
            });
        }

        function highlightMenu(sec) {
            ['home', 'sobre', 'projetos', 'contato'].forEach(id => {
                const el = document.querySelector(`#menu-list a[href="#${id}"]`);
                if (el) {
                    if (id === sec) el.classList.add('active');
                    else el.classList.remove('active');
                }
            });
        }

        function getCurrentSection() {
            let sec = location.hash.replace('#', '');
            return (!sec || sec === 'home') ? 'home' : sec;
        }

        window.addEventListener('DOMContentLoaded', () => {
            let sec = getCurrentSection();
            loadSection(sec);
        });

        window.addEventListener('hashchange', () => {
            let sec = getCurrentSection();
            loadSection(sec);
        });
    </script>
</body>

</html>